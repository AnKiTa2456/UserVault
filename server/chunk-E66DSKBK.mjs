import './polyfills.server.mjs';
import{a as N,b as V,c as k,d as F,e as R,f as W,g as E,j as T,k as S,l as M,m as I}from"./chunk-YNA2ON4H.mjs";import{Ab as P,Da as h,Ea as m,F as l,G as g,Ha as p,Ia as u,Ja as _,Y as d,aa as x,da as O,ha as v,kb as L,lb as j,oa as f,sa as r,ta as o,va as w,wa as C,xa as a}from"./chunk-PKHAMJRK.mjs";import"./chunk-X2SEQXRR.mjs";function q(c,s){if(c&1){let i=w();r(0,"div",4)(1,"h2"),m(2,"Login"),o(),r(3,"form",5,0),C("ngSubmit",function(){l(i);let e=a();return g(e.loginForm())}),r(5,"input",6),_("ngModelChange",function(e){l(i);let n=a();return u(n.loginObj.email,e)||(n.loginObj.email=e),g(e)}),o(),r(6,"input",7),_("ngModelChange",function(e){l(i);let n=a();return u(n.loginObj.password,e)||(n.loginObj.password=e),g(e)}),o(),r(7,"button",8),m(8,"Login"),o()(),r(9,"p"),m(10,"Not registered? "),r(11,"a",9),C("click",function(){l(i);let e=a();return g(e.toggleForm("register"))}),m(12,"Register here"),o()()()}if(c&2){let i=h(4),t=a();d(5),p("ngModel",t.loginObj.email),d(),p("ngModel",t.loginObj.password),d(),f("disabled",i.invalid)}}function z(c,s){if(c&1){let i=w();r(0,"div",4)(1,"h2"),m(2,"Register"),o(),r(3,"form",5,1),C("ngSubmit",function(){l(i);let e=a();return g(e.registerForm())}),r(5,"input",10),_("ngModelChange",function(e){l(i);let n=a();return u(n.registerObj.firstName,e)||(n.registerObj.firstName=e),g(e)}),o(),r(6,"input",11),_("ngModelChange",function(e){l(i);let n=a();return u(n.registerObj.lastName,e)||(n.registerObj.lastName=e),g(e)}),o(),r(7,"input",6),_("ngModelChange",function(e){l(i);let n=a();return u(n.registerObj.email,e)||(n.registerObj.email=e),g(e)}),o(),r(8,"input",7),_("ngModelChange",function(e){l(i);let n=a();return u(n.registerObj.password,e)||(n.registerObj.password=e),g(e)}),o(),r(9,"button",8),m(10,"Register"),o()(),r(11,"p"),m(12,"Already registered? "),r(13,"a",9),C("click",function(){l(i);let e=a();return g(e.toggleForm("login"))}),m(14,"Login here"),o()()()}if(c&2){let i=h(4),t=a();d(5),p("ngModel",t.registerObj.firstName),d(),p("ngModel",t.registerObj.lastName),d(),p("ngModel",t.registerObj.email),d(),p("ngModel",t.registerObj.password),d(),f("disabled",i.invalid)}}var B=class c{constructor(s,i){this._snackbar=s;this._router=i}activeForm="login";registerObj=new S;loginObj=new M;toggleForm(s){this.activeForm=s,this.clearForms()}clearForms(){this.registerObj=new S,this.loginObj=new M}registerForm(){let{firstName:s,lastName:i,email:t,password:e}=this.registerObj;if(!s||!i||!t||!e){this._snackbar.open("Please fill all fields in registration","Close",{duration:3e3});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)){this._snackbar.open("Please enter a valid email","Close",{duration:3e3});return}if(!/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&]).{8,}$/.test(e)){this._snackbar.open("Password must be 8+ characters with special character and number","Close",{duration:4e3});return}let y=localStorage.getItem("users"),b=y?JSON.parse(y):[];if(b.some(U=>U.email.toLowerCase()===t.toLowerCase())){this._snackbar.open("Email is already registered","Close",{duration:3e3});return}b.push(this.registerObj),localStorage.setItem("users",JSON.stringify(b)),this._snackbar.open("User registered successfully. Please login.","Close",{duration:3e3}),this.toggleForm("login")}loginForm(){if(!this.loginObj.email||!this.loginObj.password){this._snackbar.open("Please enter email and password","Close",{duration:3e3});return}let s=localStorage.getItem("users");if(!s){this._snackbar.open("No registered users found. Please register first.","Close",{duration:3e3});return}let t=JSON.parse(s).find(e=>e.email.toLowerCase()===this.loginObj.email.toLowerCase());if(!t){this._snackbar.open("User does not exist. Please register first.","Close",{duration:3e3});return}if(t.password!==this.loginObj.password){this._snackbar.open("Incorrect password.","Close",{duration:3e3});return}localStorage.setItem("loggedUser",JSON.stringify(t)),this._snackbar.open("Login successful","Close",{duration:3e3}),this._router.navigateByUrl("/dashboard")}static \u0275fac=function(i){return new(i||c)(x(I),x(P))};static \u0275cmp=O({type:c,selectors:[["app-login-signup"]],decls:3,vars:2,consts:[["loginFormRef","ngForm"],["registerFormRef","ngForm"],[1,"form-container"],["class","form-card",4,"ngIf"],[1,"form-card"],["novalidate","",3,"ngSubmit"],["type","email","name","email","required","","placeholder","Email",3,"ngModelChange","ngModel"],["type","password","name","password","required","","placeholder","Password",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"],[3,"click"],["type","text","name","firstName","required","","placeholder","First Name",3,"ngModelChange","ngModel"],["type","text","name","lastName","required","","placeholder","Last Name",3,"ngModelChange","ngModel"]],template:function(i,t){i&1&&(r(0,"div",2),v(1,q,13,3,"div",3)(2,z,15,5,"div",3),o()),i&2&&(d(),f("ngIf",t.activeForm==="login"),d(),f("ngIf",t.activeForm==="register"))},dependencies:[j,L,T,W,N,V,k,E,R,F],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.form-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea,#764ba2)}.form-card[_ngcontent-%COMP%]{width:90%;max-width:400px;padding:24px;background-color:#fffffff2;border-radius:12px;box-shadow:0 8px 16px #0003}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:10px;margin-top:10px;border-radius:6px;border:1px solid #ccc;font-size:16px}input[_ngcontent-%COMP%]:focus{border-color:#764ba2;outline:none;background-color:#f9f6ff}button[_ngcontent-%COMP%]{margin-top:15px;width:100%;padding:10px;background-color:#764ba2;color:#fff;font-weight:700;border:none;border-radius:8px;cursor:pointer;font-size:16px}button[_ngcontent-%COMP%]:hover{background-color:#5a3677}p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#667eea;text-decoration:none}p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#4353b3}"]})};export{B as LoginSignupComponent};
